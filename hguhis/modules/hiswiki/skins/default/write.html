<!--// datepicker javascript plugin load -->
<!--%load_js_plugin("ui")-->
<!--%load_js_plugin("ui.datepicker")-->
<load target="js/MyMethodCall.js"/>
<form action="./" method="post" id="write">
	<input type="hidden" name="document_srl" value="{$document_info->get('document_srl')}" />
	<input type="hidden" name="content" value="{$document_info->getContentText()}"/>
	<input type="hidden" name="act" value="procHiswikiTopicWrite" />
	<input type="hidden" name="success_return_url" value="{getUrl('act','dispHiswikiForntPage')}" />
	<input type="hidden" name="error_return_url" value="{getUrl('act','procHiswikiTopicWrite')}" /> 
	<div class="box category&title">
		<span>카테고리</span>
		<select name="category_srl" class="category">
			<option value="0">카테고리 선택</option>
			<option loop="$category_list=>$val"
				value="{$val->category_srl}"
				selected="selected"|cond="$document_info->get('category_srl')==$val->category_srl">
				{str_repeat("&nbsp;&nbsp;",$val->depth)} {$val->title} ({$val->document_count})			
			</option>
		</select>
	</div>
	<div class="title">
		<span>제목 </span>
		<input id="title" type="text" name="title" size="100%" value="{$document_info->getTitle()}"/>
		<span style="display:none; color:red;" class="warning">존재하는 제목입니다.</span>
	</div>
	<div class="date">
		<span>
			<span>시작연도</span> 
			<input type="hidden" name="start_date" class="start_date" value="{zdate($extra_vars[1]->value.'000000','Y-m-d')}"|cond="$topic_info->data[0]->start_date" />
			<input type="text" class="cal startDate" value="{zdate($extra_vars[1]->value.'000000','Y-m-d')}"|cond="$topic_info->data[0]->start_date"/>
			<input type="button" name="delete_button" value="삭제" class="del_date">
		</span>
		
		<span>|</span>
		
		<span>
			<span>종료연도</span> 
			<input type="hidden" name="end_date" class="end_date" value="{zdate($extra_vars[2]->value.'000000','Y-m-d')}"|cond="$topic_info->data[0]->end_date" />
			<input type="text" class="cal endDate"  value="{zdate($extra_vars[2]->value.'000000','Y-m-d')}"|cond="$topic_info->data[0]->end_date" />
			<input type="button" name="delete_button" value="삭제" class="del_date">
		</span>
		<script type="text/javascript">
			(function($) {
				$(function() {
					var option = {
						changeMonth : true,
						changeYear : true,
						gotoCurrent : false,
						yearRange : '1900:+5',
						dateFormat : 'yy-mm-dd',
						onSelect : function() {

							$(this).prev('input[type="hidden"]').val(this.value.replace(/-/g, ""))
						}
					};
					$.extend(option, $.datepicker.regional['ko']);
					$(".cal").datepicker(option);
				});
			})(jQuery);
		</script>
	</div>
	<input type="hidden" name="module_srl"
		value="{$module_info->module_srl}" />
	<div class="editor">{$document_info->getEditor()}</div>
	<div class="tag_box">
		태그검색어 입력 <input type="text" name="tags" class="tags" value="{htmlspecialchars($document_info->get('tags'))}"/> 쉼표(,)로 구분하여 여러개 입력가능 </div>
	</br>
	<div class="submit_btn">
		<input type="submit" class="submit"/>
	</div>
</form>
<load target="js/CheckDuplicate.js" />